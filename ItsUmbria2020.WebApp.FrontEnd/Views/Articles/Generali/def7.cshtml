<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="it">
<head>
<title>Programmiamo</title>
<meta name="keywords" content="programmiamo, programmi, linguaggi, javascript, visual basic"/>
<meta name="description" content="linguaggi di programmazione"/>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link href=" ../css/principale.css" rel="stylesheet" type="text/css"/>
<link href=" ../css/classi.css" rel="stylesheet" type="text/css"/>
<script type="text/JavaScript"> 
da_indovinare = Math.floor(Math.random()*100);

function controlla() 
{
var tentativo = document.getElementById("tentativo").value;
var conto = document.getElementById("conteggio").value;
conto = parseInt(conto) + 1;
document.getElementById("conteggio").value = conto;

if (tentativo == da_indovinare) {
    alert("Indovinato!") ;
    genera();
    } 
else if (tentativo > da_indovinare) {
    alert("Troppo alto");
    } 
else {
    alert("Troppo basso");
    }
}


// Genera un numero casuale
function genera() {
da_indovinare = Math.floor(Math.random()*100);
document.getElementById("conteggio").value = 0;
document.getElementById("tentativo").focus();
}

// Verifica se &eacute; stato inserito un numero valido
function valido()
{
var num = document.getElementById("tentativo").value;

if (!isNumber(num))
    {
    alert("Non &eacute; stato inserito un valore numerico")
    document.getElementById("tentativo").focus();
    }
}

// Funzione di servizio per controllare se un dato valore &eacute; numerico o no
function isNumber(n) {
return !isNaN(parseFloat(n)) && isFinite(n);
}

</script>
</head>
<body>
  <div id="contenitore2">
    <!-- Contneuti -->

	<div class="titolo">

	  Un semplice gioco</div>
        <p>A conclusione della nostra introduzione al linguaggio JS, 
		consideriamo ora un esempio riassuntivo dove possiamo vedere applicati 
		in pratica gran parte dei concetti visti precedentemente.</p>
	<p>Si tratta di un programma per giocare al classico gioco di indovinare un 
	numero. Il computer genera un numero pseudocasuale compreso fra 0 e 100 e 
	l'utente deve indovinarlo per tentativi. Ad ogni tentativo il computer 
	comunica all'utente se il tentativo &eacute; minore o maggiore del numero da 
	indovinare.</p>

	<div class="titolo">

	  L'interfaccia</div>
        <p>Come &eacute; spesso il caso, l'interfaccia dello script pu&eacute; essere 
		efficacemente realizzata con un form. Il form, fra tutti gli elementi 
		html, &eacute; quello che si presta maggiormente per acquisire dati e 
		visualizzare risultati. Nel nostro caso usiamo un form fatto cos&eacute;:</p>
<form enctype="text/plain" action="" style ="margin: 0 auto; width:300px">
<table border="0" width="100px">
 <tr>
 <td> <input type="text" id="tentativo" size="8" onfocusout="valido()"> </td> 
 <td style="text-align:center"><input type="button" onclick="controlla()" value="Controlla"></td>
 </tr>
 <tr>
 <td style="font-weight:bolder">Tentativi:</td>
 <td> <input type="text" id="conteggio" size="8" style="background-color:#D0D0D0; text-align:center" value="0"></td>
 <tr>
 <td colspan="2" style="text-align:center">
 <input type="button" onclick="genera()" value="Nuovo Gioco">
 </td>
 </tr>
 </table>
</form>
        <p>Il codice HTML corrispondente &eacute; il seguente:</p>
<div class="code">
  &lt;body onload=&quot;genera()&quot;&gt;<br />
	<br />
	&lt;form enctype=&quot;text/plain&quot; style =&quot;margin: 0 auto; width:300px&quot;&gt;<br />
	<br />
	&lt;table style=&quot;width: 100px&quot;&gt;<br />
	&lt;tr&gt;<br />
	&lt;td&gt; &lt;input type=&quot;text&quot; id=&quot;tentativo&quot; size=&quot;8&quot; 
	onblur=&quot;valido()&quot;&gt; &lt;/td&gt;
	<br />
	&lt;td style=&quot;text-align:center&quot;&gt;&lt;input type=&quot;button&quot; onclick=&quot;controlla()&quot; 
	value=&quot;Controlla&quot;&gt;&lt;/td&gt;<br />
	&lt;/tr&gt;<br />
	&lt;tr&gt;<br />
	&lt;td style=&quot;font-weight:bolder&quot;&gt;Tentativi:&lt;/td&gt;<br />
	&lt;td&gt; &lt;input type=&quot;text&quot; id=&quot;conteggio&quot; size=&quot;8&quot; style=&quot;background-color:#D0D0D0; 
	text-align:center&quot; value=&quot;0&quot; &gt;&lt;/td&gt;<br />
	&lt;tr&gt;<br />
	&lt;td colspan=&quot;2&quot; style=&quot;text-align:center&quot;&gt;<br />
	&lt;input type=&quot;button&quot; onclick=&quot;genera()&quot; value=&quot;Nuovo Gioco&quot;&gt;<br />
	&lt;/td&gt;<br />
	&lt;/tr&gt;<br />
	&lt;/table&gt;<br />
	<br />
	&lt;/form&gt;<br />
	<br />
	&lt;/body&gt;</div>
	<p>Osserviamo l'uso dei seguenti gestori di eventi con le funzioni ad esse 
	associate:</p>
	<ul>
					<li>onload = &quot;genera()&quot;: chiama la funzione genera quando 
					viene caricata il body (cio&eacute; in pratica al caricamento della 
					pagina);<br />
					</li>
					<li>onblur = &quot;valido()&quot;: quando la casella di testo perde 
					il focus (cio&eacute; quando l'utente fa click fuori di essa), viene effettuato il controllo se la casella 
					contiene un numero valido oppure no;<br />
					</li>
					<li>onclick = &quot;controlla()&quot;: quando si fa click sul bottone 
					Controlla verifica se il numero &eacute; minore, maggiore o uguale 
					a quello da indovinare;<br />
					</li>
					<li>onclick = &quot;genera()&quot;: genera un nuovo numero casuale e 
					avvia un nuovo gioco quando l'utente fa click sul bottone 
					Nuovo Gioco.</li>
	</ul>

	<div class="titolo">

	  <br />
		Il codice</div>
        <p>Il codice delle funzioni associate &eacute; il seguente:</p>
<div class="code">
  &lt;script&gt; <br />
	<br />
	function controlla() <br />
	{<br />
	var tentativo = Number(document.getElementById(&quot;tentativo&quot;).value);<br />
	var conto = Number(document.getElementById(&quot;conteggio&quot;).value);<br />
	conto = conto + 1;<br />
	document.getElementById(&quot;conteggio&quot;).value = conto;<br />
	<br />
	if (tentativo == da_indovinare) {<br />
&nbsp;&nbsp;&nbsp; alert(&quot;Indovinato!&quot;) ;<br />
&nbsp;&nbsp;&nbsp; genera();<br />
&nbsp;&nbsp;&nbsp; } <br />
	else if (tentativo &gt; da_indovinare) {<br />
&nbsp;&nbsp;&nbsp; alert(&quot;Troppo alto&quot;);<br />
&nbsp;&nbsp;&nbsp; } <br />
	else {<br />
&nbsp;&nbsp;&nbsp; alert(&quot;Troppo basso&quot;);<br />
&nbsp;&nbsp;&nbsp; }<br />
	}<br />
	<br />
	<br />
	// Genera un numero casuale<br />
	function genera() {<br />
	da_indovinare = Math.floor(Math.random()*100);<br />
	document.getElementById(&quot;conteggio&quot;).value = 0;<br />
	document.getElementById(&quot;tentativo&quot;).focus();<br />
	}<br />
	<br />
	// Verifica se &eacute; stato inserito un numero valido<br />
	function valido()<br />
	{<br />
	var num = document.getElementById(&quot;tentativo&quot;).value;<br />
	<br />
	if (!isNumber(num))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; alert(&quot;Non &eacute; stato inserito un valore numerico&quot;)<br />
&nbsp;&nbsp;&nbsp; document.getElementById(&quot;tentativo&quot;).focus();<br />
&nbsp;&nbsp;&nbsp; }<br />
	}<br />
	<br />
	// Funzione di servizio per controllare se un dato valore &eacute; numerico o no<br />
	function isNumber(n) {<br />
	return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n);<br />
	}<br />
	<br />
	&lt;/script&gt;<br />
</div>
	<p>Non &eacute; il caso per ora di preoccuparsi troppo nel dettaglio del 
	significato delle singole istruzioni. Notiamo solo che le funzioni 
	manipolano i valori presenti nel form usando la document.getElementById. 
	Consideriamo per esempio:</p>
<div class="code">
	document.getElementById(&quot;conteggio&quot;).value = 0;<br />
	document.getElementById(&quot;tentativo&quot;).focus();</div>
	<p>La prima istruzione azzera il valore (value) della input box con id = 
	&quot;conteggio&quot;. Value &eacute; evidentemente una propriet&eacute; dell'oggetto
	document.getElementById(&quot;conteggio&quot;).</p>
	<p>Invece
	document.getElementById(&quot;tentativo&quot;).focus() &eacute; la chiamata a un metodo (come 
	si evidenzia dalle parentesi tonde). In pratica con questa istruzione il 
	focus (cio&eacute; l'elemento attivo del form) diventa quello con id=&quot;tentativo&quot;.</p>
	<p>Notiamo anche i commenti, preceduti dal doppio slash (//), che non fanno 
	parte della sintassi del linguaggio, ma servono solo per inserire 
	spiegazioni:</p>
<div class="code">
	// Genera un numero casuale<br />
	function genera() {<br />
	...<br />
</div>
	<p>&nbsp;</p>
</div>
    <!-- Fine Contenuti -->
</body>
</html>



